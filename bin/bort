#!/usr/bin/env perl

use 5.014;
use warnings;
use strict;

use Config::Tiny;
use Getopt::Std;

use Bort;

getopts('Cc:h', \my %Opts);

if ($Opts{h}) {
  if (-t STDOUT) {
    print for <DATA>;
  }
  print <<EOF;

usage: bort.pl [opts]

 -C               compile check, load plugins then exit
 -c <config>      run with alternate config (default: bort.ini)

EOF
  exit 0;
}

my $ConfigFile = $Opts{c} // 'bort.ini';

Bort::App->Init($ConfigFile);

if ($Opts{C}) {
  say "bort: compile check done";
  exit 0;
}

Bort::App->Run;

exit 0;

__DATA__

  [0;1;35;95m‚ñå[0m        [0;1;36;96m‚ñê[0m
  [0;1;31;91m‚ñõ‚ñÄ[0;1;33;93m‚ññ‚ñû[0;1;32;92m‚ñÄ‚ññ[0;1;36;96m‚ñô‚ñÄ[0;1;34;94m‚ññ‚ñú[0;1;35;95m‚ñÄ[0m
  [0;1;33;93m‚ñå[0m [0;1;32;92m‚ñå‚ñå[0m [0;1;36;96m‚ñå[0;1;34;94m‚ñå[0m  [0;1;35;95m‚ñê[0m [0;1;31;91m‚ññ[0m
  [0;1;32;92m‚ñÄ‚ñÄ[0m [0;1;36;96m‚ñù[0;1;34;94m‚ñÄ[0m [0;1;35;95m‚ñò[0m   [0;1;33;93m‚ñÄ[0m 
